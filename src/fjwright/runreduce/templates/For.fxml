<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.collections.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox fx:id="templateRoot" alignment="CENTER" stylesheets="@templates.css" spacing="20.0" xmlns="http://javafx.com/javafx/10.0.2-internal"
      xmlns:fx="http://javafx.com/fxml/1" fx:controller="fjwright.runreduce.templates.For">
    <padding>
        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0"/>
    </padding>
    <HBox alignment="CENTER">
        <Text fontSmoothingType="LCD"
              text="A 'var' entry must be an identifier.
&#10;For iteration over a numerical range, the 'number' entries must *evaluate* to numbers.
&#10;For iteration over a list, the 'list' entry must *evaluate* to a list; the 'on' option is
allowed only in symbolic mode and makes the 'for variable' evaluate to successive 'cdr's of the list."
              textAlignment="CENTER" wrappingWidth="425.0"/>
    </HBox>
    <VBox>
        <Label alignment="BOTTOM_LEFT" text="Iterate over a...">
            <padding>
                <Insets bottom="-5.0"/>
            </padding>
        </Label>
        <HBox alignment="BOTTOM_CENTER" spacing="5.0">
            <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE">
                <Tab text="numerical range">
                    <AnchorPane>
                        <HBox alignment="CENTER" spacing="5.0">
                            <Label text="for"/>
                            <TextField fx:id="forVarTextField" onKeyTyped="#varCheckKeyTyped" prefColumnCount="4"
                                       promptText="var">
                                <tooltip>
                                    <Tooltip text="Must be an identifier"/>
                                </tooltip>
                            </TextField>
                            <Label text=":="/>
                            <TextField fx:id="fromTextField" prefColumnCount="4" promptText="number">
                                <tooltip>
                                    <Tooltip text="Must evaluate to a number"/>
                                </tooltip>
                            </TextField>
                            <Label text="step"/>
                            <TextField fx:id="stepTextField" prefColumnCount="4" promptText="number" text="1">
                                <tooltip>
                                    <Tooltip text="Must evaluate to a number"/>
                                </tooltip>
                            </TextField>
                            <Label text="until"/>
                            <TextField fx:id="untilTextField" prefColumnCount="4" promptText="number">
                                <tooltip>
                                    <Tooltip text="Must evaluate to a number"/>
                                </tooltip>
                            </TextField>
                        </HBox>
                    </AnchorPane>
                </Tab>
                <Tab text="list">
                    <AnchorPane>
                        <HBox alignment="CENTER" spacing="5.0">
                            <Label text="for each"/>
                            <TextField fx:id="foreachVarTextField" onKeyTyped="#varCheckKeyTyped" prefColumnCount="9"
                                       promptText="var">
                                <tooltip>
                                    <Tooltip text="Must be an identifier"/>
                                </tooltip>
                            </TextField>
                            <ChoiceBox fx:id="foreachChoiceBox">
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="in"/>
                                        <String fx:value="on"/>
                                    </FXCollections>
                                </items>
                                <tooltip>
                                    <Tooltip
                                            text="The 'on' option is allowed only in symbolic mode and makes the 'for variable' evaluate to successive 'cdr's of the list."/>
                                </tooltip>
                            </ChoiceBox>
                            <TextField fx:id="foreachListTextField" onKeyTyped="#listOrVarCheckKeyTyped"
                                       prefColumnCount="9" prefWidth="125.0" promptText="list">
                                <tooltip>
                                    <Tooltip text="Must evaluate to a list"/>
                                </tooltip>
                            </TextField>
                        </HBox>
                    </AnchorPane>
                </Tab>
            </TabPane>
            <ChoiceBox fx:id="actionChoiceBox">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="do"/>
                        <String fx:value="sum"/>
                        <String fx:value="product"/>
                        <String fx:value="collect"/>
                        <String fx:value="join"/>
                    </FXCollections>
                </items>
                <tooltip>
                    <Tooltip
                            text="The action to perform on the following expression; all but 'do' cause the 'for' to return a value."/>
                </tooltip>
            </ChoiceBox>
        </HBox>
        <HBox alignment="CENTER">
            <TextField fx:id="exprnTextField" promptText="expression">
                <tooltip>
                    <Tooltip text="Any expression, which is evaluated on each iteration"/>
                </tooltip>
            </TextField>
            <padding>
                <Insets top="5.0"/>
            </padding>
        </HBox>
    </VBox>
    <HBox alignment="CENTER_RIGHT" spacing="20.0">
        <padding>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0"/>
        </padding>
        <Button mnemonicParsing="false" onAction="#editButtonAction" text="Edit">
            <tooltip>
                <Tooltip text="Insert into input editor"/>
            </tooltip>
        </Button>
        <Button mnemonicParsing="false" onAction="#evaluateButtonAction" text="Evaluate">
            <tooltip>
                <Tooltip text="Send to REDUCE"/>
            </tooltip>
        </Button>
        <Button mnemonicParsing="false" onAction="#closeButtonAction" text="Close"/>
    </HBox>
</VBox>
